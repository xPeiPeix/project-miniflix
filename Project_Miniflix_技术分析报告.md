# Project Miniflix æŠ€æœ¯åˆ†ææŠ¥å‘Š

> **ç”Ÿæˆæ—¶é—´**: 2025å¹´6æœˆ19æ—¥  
> **åˆ†æèŒƒå›´**: ç°æœ‰å®ç°æ–¹æ¡ˆä¸éœ€æ±‚æ–‡æ¡£å¯¹æ¯”ã€åŠŸèƒ½æ‰©å±•å¯è¡Œæ€§åˆ†æ  
> **ç›®æ ‡**: ä¸ºåç»­å¼€å‘å’Œä¼˜åŒ–æä¾›æŠ€æœ¯å‚è€ƒ

---

## Q

è¯·åˆ†æï¼š
1ã€ç°è¡Œæ–¹æ¡ˆä¸éœ€æ±‚æ–‡æ¡£çš„è¦æ±‚æ˜¯å¦ä¸€è‡´ï¼›
2ã€å¦‚ä½•é‡å¯æœåŠ¡å™¨ä»¥åŠ è½½æ–°çš„videos.json
3ã€å¦‚ä½•ä¿®æ”¹ä¸ºhttps?
4ã€æ˜¯å¦å¯ä»¥åœ¨ä¸Šä¼ ä¸€ä¸ªæ–°çš„è§†é¢‘ä¹‹åï¼Œè‡ªåŠ¨å®Œæˆæ‹†åˆ†ã€å±•ç¤ºï¼Ÿ(ç”Ÿæˆä¸€ä¸ªé»˜è®¤çš„é…ç½®ï¼Œåç»­å¼€å‘æ‰‹åŠ¨ä¿®æ”¹)
5ã€å¦‚ä½•ä¿®æ”¹ä¸ºå…¶ä»–ç«¯å£ï¼Ÿ(åç»­å¼€æ”¾é˜²ç«å¢™)
6ã€nginxä»£ç†æ­¤ç½‘ç«™ä¹‹åï¼Œæ˜¯å¦è¿˜å¯ä»¥ä»£ç†æœåŠ¡å™¨ä¸Šçš„å…¶ä»–é¡µé¢ï¼Ÿ
7ã€å¦‚ä½•è¿›ä¸€æ­¥ä¼˜åŒ–é¡µé¢æ ·å¼ã€ç¾åŒ–æ ·å¼ã€‚
ä»¥ä¸Šå†…å®¹åªéœ€è¦åˆ†æï¼Œä¸éœ€è¦æä¾›ä»»ä½•ä»£ç ã€‚è¯·å°†åˆ†æç»“è®ºè¾“å‡ºåˆ°ä¸€ä¸ªæ–‡æ¡£ä¸­ï¼Œåç»­æˆ‘ç”¨æ¥å‚è€ƒã€‚


## 1. ç°è¡Œæ–¹æ¡ˆä¸éœ€æ±‚æ–‡æ¡£è¦æ±‚ä¸€è‡´æ€§åˆ†æ -å·²å®Œæˆ

### âœ… **å®Œå…¨ç¬¦åˆçš„éƒ¨åˆ†**
- **æŠ€æœ¯æ ˆåŒ¹é…**: ä½¿ç”¨äº†éœ€æ±‚æ–‡æ¡£æ¨èçš„Nginx + FFmpeg + HLS.jsæŠ€æœ¯æ ˆ
- **åŠŸèƒ½å®ç°**: è§†é¢‘ç”»å»Šã€HLSæ’­æ”¾ã€å“åº”å¼è®¾è®¡å…¨éƒ¨å®ç°
- **è§†é¢‘å¤„ç†**: FFmpegè½¬ç HLSæ ¼å¼ï¼Œç¬¦åˆæµåª’ä½“æ’­æ”¾è¦æ±‚
- **æ•°æ®ç®¡ç†**: videos.jsonç»“æ„å®Œå…¨æŒ‰ç…§éœ€æ±‚æ–‡æ¡£è®¾è®¡
- **ç”¨æˆ·ä½“éªŒ**: å¡ç‰‡å¼å±•ç¤ºã€ç‚¹å‡»æ’­æ”¾ã€è¿”å›å¯¼èˆªç­‰äº¤äº’å®Œæ•´

### âœ… **è¶…å‡ºéœ€æ±‚çš„ä¼˜åŒ–**
- **æ€§èƒ½ä¼˜åŒ–**: å®ç°äº†ç¼“å­˜ç­–ç•¥ã€Gzipå‹ç¼©ç­‰ç”Ÿäº§çº§ä¼˜åŒ–
- **CSSå°é¢å¤„ç†**: è§£å†³äº†ä¸åŒå°ºå¯¸å°é¢çš„ç»Ÿä¸€æ˜¾ç¤ºé—®é¢˜
- **é”™è¯¯å¤„ç†**: å¢åŠ äº†å®Œå–„çš„é”™è¯¯æç¤ºå’Œå¼‚å¸¸å¤„ç†

### **ç»“è®º**: ç°è¡Œæ–¹æ¡ˆ**100%ç¬¦åˆ**éœ€æ±‚æ–‡æ¡£è¦æ±‚ï¼Œå¹¶åœ¨æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒæ–¹é¢æœ‰æ‰€è¶…è¶Šã€‚

---

## 2. é‡å¯æœåŠ¡å™¨ä»¥åŠ è½½æ–°videos.jsonåˆ†æ -å·²å®Œæˆ

### **å½“å‰çŠ¶æ€**
- videos.jsonæ˜¯é™æ€æ–‡ä»¶ï¼Œé€šè¿‡å‰ç«¯JavaScriptåŠ¨æ€åŠ è½½
- NginxæœåŠ¡å™¨ä¼šè‡ªåŠ¨æä¾›æœ€æ–°çš„æ–‡ä»¶å†…å®¹
- **æ— éœ€é‡å¯æœåŠ¡å™¨**å³å¯ç”Ÿæ•ˆ

### **ç”Ÿæ•ˆæœºåˆ¶**
1. **ç«‹å³ç”Ÿæ•ˆ**: ä¿®æ”¹videos.jsonåï¼Œä¸‹æ¬¡å‰ç«¯è¯·æ±‚æ—¶è‡ªåŠ¨è·å–æœ€æ–°å†…å®¹
2. **ç¼“å­˜å½±å“**: å½“å‰é…ç½®ä¸­videos.jsonç¼“å­˜æ—¶é—´ä¸º1å°æ—¶
3. **å¼ºåˆ¶åˆ·æ–°**: ç”¨æˆ·é€šè¿‡æµè§ˆå™¨å¼ºåˆ¶åˆ·æ–°(Ctrl+F5)å¯ç«‹å³çœ‹åˆ°æ›´æ–°

### **æœ€ä½³å®è·µå»ºè®®**
- ä¿®æ”¹videos.jsonåæ— éœ€ä»»ä½•æœåŠ¡å™¨æ“ä½œ
- å¦‚éœ€ç«‹å³ç”Ÿæ•ˆï¼Œå¯ä¸´æ—¶æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
- ç”Ÿäº§ç¯å¢ƒå»ºè®®å°†videos.jsonç¼“å­˜æ—¶é—´è°ƒæ•´ä¸ºæ›´çŸ­(å¦‚5åˆ†é’Ÿ)

---

## 3. HTTPSæ”¹é€ å¯è¡Œæ€§åˆ†æ

### **æŠ€æœ¯å¯è¡Œæ€§**: â­â­â­â­â­ (å®Œå…¨å¯è¡Œ)

### **å®ç°è·¯å¾„**
1. **SSLè¯ä¹¦è·å–**: ä½¿ç”¨Let's Encryptå…è´¹è¯ä¹¦æˆ–è´­ä¹°å•†ä¸šè¯ä¹¦
2. **Nginxé…ç½®è°ƒæ•´**: æ·»åŠ 443ç«¯å£ç›‘å¬å’ŒSSLé…ç½®
3. **HTTPé‡å®šå‘**: å°†80ç«¯å£è¯·æ±‚é‡å®šå‘åˆ°443ç«¯å£
4. **HLSå…¼å®¹æ€§**: HLSæµåª’ä½“å®Œå…¨æ”¯æŒHTTPSä¼ è¾“

### **ä¸»è¦ä¼˜åŠ¿**
- **å®‰å…¨æ€§æå‡**: æ•°æ®ä¼ è¾“åŠ å¯†ï¼Œé˜²æ­¢ä¸­é—´äººæ”»å‡»
- **æµè§ˆå™¨ä¿¡ä»»**: ç°ä»£æµè§ˆå™¨å¯¹HTTPSç«™ç‚¹æ›´å‹å¥½
- **SEOä¼˜åŠ¿**: æœç´¢å¼•æ“ä¼˜å…ˆæ”¶å½•HTTPSç«™ç‚¹
- **åŠŸèƒ½æ”¯æŒ**: æŸäº›æµè§ˆå™¨APIä»…åœ¨HTTPSä¸‹å¯ç”¨

### **å®æ–½å¤æ‚åº¦**: ä¸­ç­‰(éœ€è¦è¯ä¹¦é…ç½®å’ŒåŸŸåè§£æ)

---

## 4. è‡ªåŠ¨åŒ–è§†é¢‘å¤„ç†å¯è¡Œæ€§åˆ†æ

### **æŠ€æœ¯å¯è¡Œæ€§**: â­â­â­â­â­ (å®Œå…¨å¯è¡Œ)

### **å®ç°æ–¹æ¡ˆæ¡†æ¶**
1. **æ–‡ä»¶ç›‘æ§**: ä½¿ç”¨inotifyç›‘æ§è§†é¢‘ä¸Šä¼ ç›®å½•
2. **è‡ªåŠ¨è½¬ç **: è§¦å‘FFmpegè½¬ç è„šæœ¬
3. **å°é¢ç”Ÿæˆ**: è‡ªåŠ¨æå–è§†é¢‘å¸§ä½œä¸ºå°é¢
4. **å…ƒæ•°æ®æ›´æ–°**: è‡ªåŠ¨æ›´æ–°videos.jsonæ–‡ä»¶
5. **é»˜è®¤é…ç½®**: ç”Ÿæˆæ ‡å‡†åŒ–çš„è§†é¢‘æ ‡é¢˜å’Œæè¿°æ¨¡æ¿

### **æŠ€æœ¯ç»„ä»¶éœ€æ±‚**
- **Python/Shellè„šæœ¬**: å¤„ç†è‡ªåŠ¨åŒ–é€»è¾‘
- **æ–‡ä»¶ç³»ç»Ÿç›‘æ§**: inotify-toolsæˆ–Python watchdog
- **JSONæ“ä½œ**: åŠ¨æ€ä¿®æ”¹videos.jsonå†…å®¹
- **æ¨¡æ¿ç³»ç»Ÿ**: ç”Ÿæˆæ ‡å‡†åŒ–çš„è§†é¢‘ä¿¡æ¯

### **å®æ–½å¤æ‚åº¦**: ä¸­ç­‰(éœ€è¦å¼€å‘è‡ªåŠ¨åŒ–è„šæœ¬)
### **ç»´æŠ¤æˆæœ¬**: ä½(ä¸€æ¬¡å¼€å‘ï¼Œé•¿æœŸä½¿ç”¨)

---

## 5. ç«¯å£ä¿®æ”¹å¯è¡Œæ€§åˆ†æ

### **æŠ€æœ¯å¯è¡Œæ€§**: â­â­â­â­â­ (å®Œå…¨å¯è¡Œ)

### **ä¿®æ”¹æ–¹å¼**
1. **Nginxé…ç½®è°ƒæ•´**: ä¿®æ”¹listenæŒ‡ä»¤ç«¯å£å·
2. **é˜²ç«å¢™é…ç½®**: å¼€æ”¾æ–°ç«¯å£ï¼Œå…³é—­80ç«¯å£(å¯é€‰)
3. **è®¿é—®åœ°å€å˜æ›´**: ç”¨æˆ·éœ€è¦åœ¨URLä¸­æŒ‡å®šç«¯å£å·

### **å¸¸ç”¨ç«¯å£å»ºè®®**
- **8080**: å¸¸ç”¨çš„HTTPæ›¿ä»£ç«¯å£
- **8443**: å¸¸ç”¨çš„HTTPSæ›¿ä»£ç«¯å£  
- **è‡ªå®šä¹‰ç«¯å£**: å¦‚9000, 3000ç­‰

### **æ³¨æ„äº‹é¡¹**
- éæ ‡å‡†ç«¯å£éœ€è¦åœ¨URLä¸­æ˜¾å¼æŒ‡å®š
- ä¼ä¸šé˜²ç«å¢™å¯èƒ½é˜»æ­¢éæ ‡å‡†ç«¯å£
- CDNå’Œåå‘ä»£ç†é…ç½®éœ€è¦ç›¸åº”è°ƒæ•´

### **å®æ–½å¤æ‚åº¦**: ä½(ä»…éœ€ä¿®æ”¹é…ç½®æ–‡ä»¶)

---

## 6. Nginxå¤šç«™ç‚¹ä»£ç†å¯è¡Œæ€§åˆ†æ

### **æŠ€æœ¯å¯è¡Œæ€§**: â­â­â­â­â­ (å®Œå…¨å¯è¡Œ)

### **å®ç°æœºåˆ¶**
1. **è™šæ‹Ÿä¸»æœº**: åŸºäºåŸŸåçš„å¤šç«™ç‚¹é…ç½®
2. **è·¯å¾„ä»£ç†**: åŸºäºURLè·¯å¾„çš„åº”ç”¨åˆ†å‘
3. **ç«¯å£å¤ç”¨**: 80/443ç«¯å£åŒæ—¶æœåŠ¡å¤šä¸ªåº”ç”¨

### **é…ç½®ç­–ç•¥**
- **åŸŸååˆ†ç¦»**: video.domain.com, api.domain.com
- **è·¯å¾„åˆ†ç¦»**: domain.com/video, domain.com/api
- **å­ç›®å½•ä»£ç†**: domain.com/app1, domain.com/app2

### **å½“å‰å½±å“**
- ç°æœ‰é…ç½®ä½¿ç”¨äº†`default_server`ï¼Œä¼šæ•è·æ‰€æœ‰è¯·æ±‚
- éœ€è¦è°ƒæ•´ä¸ºç‰¹å®šåŸŸåæˆ–è·¯å¾„åŒ¹é…
- å…¶ä»–åº”ç”¨éœ€è¦ç‹¬ç«‹çš„serverå—é…ç½®

### **æ‰©å±•æ€§**: æä½³(Nginxå¤©ç„¶æ”¯æŒå¤šç«™ç‚¹æ¶æ„)

---

## 7. é¡µé¢æ ·å¼ä¼˜åŒ–æ½œåŠ›åˆ†æ -å·²å®Œæˆ

### **å½“å‰çŠ¶æ€è¯„ä¼°**: â­â­â­â­â˜† (å·²ç»è¾ƒä¸ºç¾è§‚)

### **å¯ä¼˜åŒ–æ–¹å‘**

#### **è§†è§‰è®¾è®¡å±‚é¢**
- **è‰²å½©ç³»ç»Ÿ**: å¼•å…¥ä¸“ä¸šçš„è®¾è®¡è‰²æ¿ï¼Œå¢å¼ºå“ç‰Œæ„Ÿ
- **å›¾æ ‡ä½“ç³»**: é›†æˆFont Awesomeæˆ–è‡ªå®šä¹‰å›¾æ ‡
- **åŠ¨ç”»æ•ˆæœ**: æ·»åŠ å¾®äº¤äº’åŠ¨ç”»ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
- **åŠ è½½çŠ¶æ€**: éª¨æ¶å±ã€è¿›åº¦æ¡ç­‰åŠ è½½çŠ¶æ€ä¼˜åŒ–

#### **å¸ƒå±€ä¼˜åŒ–**
- **ç½‘æ ¼ç³»ç»Ÿ**: æ›´ç²¾ç»†çš„å“åº”å¼å¸ƒå±€æ§åˆ¶
- **é—´è·ç»Ÿä¸€**: ä½¿ç”¨è®¾è®¡ç³»ç»Ÿç»Ÿä¸€é¡µé¢é—´è·
- **å¡ç‰‡è®¾è®¡**: é˜´å½±ã€åœ†è§’ã€æ‚¬åœæ•ˆæœçš„ç»†èŠ‚ä¼˜åŒ–

#### **äº¤äº’ä½“éªŒ**
- **æœç´¢åŠŸèƒ½**: æ·»åŠ è§†é¢‘æœç´¢å’Œç­›é€‰
- **åˆ†ç±»æ ‡ç­¾**: è§†é¢‘åˆ†ç±»å’Œæ ‡ç­¾ç³»ç»Ÿ
- **æ’­æ”¾æ§åˆ¶**: è‡ªå®šä¹‰æ’­æ”¾å™¨æ§ä»¶æ ·å¼
- **é”®ç›˜å¯¼èˆª**: æ”¯æŒé”®ç›˜å¿«æ·é”®æ“ä½œ

#### **æ€§èƒ½ä½“éªŒ**
- **å›¾ç‰‡ä¼˜åŒ–**: WebPæ ¼å¼ã€æ‡’åŠ è½½ã€æ¸è¿›å¼åŠ è½½
- **å­—ä½“ä¼˜åŒ–**: Webå­—ä½“å­é›†åŒ–ã€å­—ä½“æ˜¾ç¤ºä¼˜åŒ–
- **CSSä¼˜åŒ–**: å…³é”®CSSå†…è”ã€éå…³é”®CSSå»¶è¿ŸåŠ è½½

### **å®æ–½å¤æ‚åº¦**
- **åŸºç¡€ç¾åŒ–**: ä½(CSSè°ƒæ•´)
- **é«˜çº§äº¤äº’**: ä¸­ç­‰(JavaScriptå¼€å‘)
- **æ·±åº¦å®šåˆ¶**: é«˜(éœ€è¦è®¾è®¡å¸ˆé…åˆ)

---

## æ€»ç»“ä¸å»ºè®®

### **ç°çŠ¶è¯„ä»·**
Project Miniflixå·²ç»æ˜¯ä¸€ä¸ª**åŠŸèƒ½å®Œæ•´ã€æŠ€æœ¯å…ˆè¿›**çš„è§†é¢‘å±•ç¤ºå¹³å°ï¼Œå®Œå…¨æ»¡è¶³éœ€æ±‚æ–‡æ¡£çš„æ‰€æœ‰è¦æ±‚ã€‚

### **ä¼˜å…ˆçº§å»ºè®®**
1. **é«˜ä¼˜å…ˆçº§**: HTTPSæ”¹é€ (å®‰å…¨æ€§)
2. **ä¸­ä¼˜å…ˆçº§**: è‡ªåŠ¨åŒ–è§†é¢‘å¤„ç†(ä¾¿åˆ©æ€§)
3. **ä½ä¼˜å…ˆçº§**: æ ·å¼ç¾åŒ–(é”¦ä¸Šæ·»èŠ±)

### **æŠ€æœ¯æ¶æ„è¯„ä»·**
- **æ‰©å±•æ€§**: ä¼˜ç§€(nginx + é™æ€æ–‡ä»¶æ¶æ„ä¾¿äºæ‰©å±•)
- **å¯ç»´æŠ¤æ€§**: è‰¯å¥½(ä»£ç ç»“æ„æ¸…æ™°ï¼ŒæŠ€æœ¯æ ˆæˆç†Ÿ)
- **æ€§èƒ½**: ä¼˜ç§€(nginx + ç¼“å­˜ç­–ç•¥)
- **å®‰å…¨æ€§**: è‰¯å¥½(å¯é€šè¿‡HTTPSè¿›ä¸€æ­¥æå‡)

### **é•¿æœŸå‘å±•å»ºè®®**
1. å»ºç«‹è‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹
2. æ·»åŠ ç›‘æ§å’Œæ—¥å¿—åˆ†æ
3. è€ƒè™‘CDNåŠ é€Ÿä¼˜åŒ–
4. å¼€å‘ç®¡ç†åå°ç•Œé¢

---

> **æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
> **æœ€åæ›´æ–°**: 2025å¹´6æœˆ19æ—¥  
> **æŠ€æœ¯è´Ÿè´£**: nya~ ğŸ± 